"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7642],{37175:function(e,i,t){var n=t(35250),a=t(70079),l=t(65529),s=t(79852),r=t(66494),c=t(82599),o=t(20118),d=t(29500),u=t(93766),y=t(866),f=t(14475),p=t(63081),x=t(28067),g=t(44975),_=t(57158),Z=t(14217),m=t(32015),b=t(18338),S=t(76777);i.Z=e=>{let{show:i,isSellingBlocked:t,screen:h,onClose:j}=e,v=(0,f.Z)("taxpayer_restriction_info_modal"),{track:C}=(0,_.Z)(),T=(0,S.Z)(),I=v(t?"selling_blocked.title":"restricted.title"),k=v(t?"selling_blocked.body":"restricted.body"),V=t?b.U.TaxpayersSalesBlockModal:b.U.TaxpayersBalanceBlockModal;return(0,a.useEffect)(()=>{i&&C((0,Z.rn)({screen:h,target:t?m.G.TaxpayersSalesBlockModal:m.G.TaxpayersBalanceBlockModal}))},[C,i,t,h]),(0,n.jsxs)(l.Z,{show:i,className:"u-flexbox u-flex-direction-column",children:[(0,n.jsx)(s.Z,{body:(0,n.jsx)(r.Z,{type:r.Z.Type.Title,text:v("heading"),bold:!0}),right:(0,n.jsx)(c.IM,{styling:c.IM.Styling.Flat,onClick:()=>{C((0,Z.Q5)({screen:h,target:V,targetDetails:"close"})),j()},testId:"taxpayer-restriction-modal-close",iconName:y.Z,inline:!0})}),(0,n.jsx)(o.Z,{}),(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(r.Z,{type:r.Z.Type.Heading,text:I}),(0,n.jsx)(u.Z,{size:u.Z.Size.Large}),(0,n.jsx)(r.Z,{type:r.Z.Type.Body,text:k}),(0,n.jsx)(u.Z,{size:u.Z.Size.XLarge}),(0,n.jsx)(c.IM,{styling:c.IM.Styling.Filled,text:v("actions.finalise"),onClick:()=>{C((0,Z.Q5)({screen:h,target:V,targetDetails:"finalise"})),(0,g.Q$S)(),(0,p.ru)((0,x.taz)(T))}}),(0,n.jsx)(u.Z,{size:u.Z.Size.Large}),(0,n.jsx)(c.IM,{styling:c.IM.Styling.Outlined,text:v("actions.learn_more"),onClick:()=>{C((0,Z.Q5)({screen:h,target:V,targetDetails:"learn"})),(0,g.Q$S)(),(0,p.ru)((0,x.rzV)(T))}})]})]})}},77642:function(e,i,t){t.d(i,{Z:function(){return G}});var n,a,l,s,r=t(35250),c=t(70079),o=t(98829),d=t(3283),u=t(44275),y=t.n(u);(n=l||(l={})).Info="info",n.Success="success",n.Warning="warning",n.Error="error",(a=s||(s={})).FirstReminder="first_reminder",a.SecondReminder="second_reminder",a.NoFillReminder="no_fill_reminder",a.SellingBlocked="selling_blocked",a.Restricted="restricted",a.VerificationInitiation="verification_initiation",a.VerificationProgress="verification_progress",a.VerificationWarning="verification_warning",a.VerificationCritical="verification_critical",a.VerificationCorrectionInitation="verification_correction_initiation",a.VerificationCorrectionProgress="verification_correction_progress",a.VerificationCorrectionWarning="verification_correction_warning",a.VerificationCorrectionCritical="verification_correction_critical",a.VerificationSuccess="verification_success";var f=t(44975),p=t(63081),x=t(57158),g=t(14217),_=t(32015),Z=t(73661),m=t(18338),b=t(79699),S=t(37175),h=t(76777),j=t(37227),v=t(48417),C=t(29448),T=t(15394),I=t(79852),k=t(66494),V=t(82599),N=t(20118),w=t(49370),M=t(93766),F=t(29500),z=t(65529),B=t(81518),D=t(46062),U=t(66835),E=t(14475),L=t(50225),Q=t(94440),A=t(38206),R=t(28067),P=t(81717),O=t(25246),W=t(86978),$=e=>{let{show:i,onClose:t}=e,n=(0,E.Z)("taxpayer_special_verification.failure_modal"),{track:a}=(0,x.Z)(),{formatDate:l}=(0,T.Z)(),s=(0,d.I0)(),o=(0,h.Z)(),u=(0,U.Z)("/assets/no-photo"),_=(0,c.useMemo)(()=>y().v4(),[]);(0,c.useEffect)(()=>{s(D.L({type:W.Z.Dac7Reporting}))},[s]);let[Z,S]=(0,c.useState)(v.C.Idle),[j,C]=(0,c.useState)(null),$=(0,c.useCallback)(e=>l(e*O.L7,{year:"numeric",month:"long",day:"numeric"}),[l]);(0,c.useEffect)(()=>{(async()=>{S(v.C.Pending);let e=await (0,f.Cu6)();if("errors"in e){S(v.C.Failure);return}S(v.C.Success),C($(e.deadline))})()},[$]),(0,c.useEffect)(()=>{i&&a((0,g.qv)({screen:b.l.TaxpayersSpecialVerificationFailure}))},[i,a]);let G=()=>{a((0,g.Q5)({screen:b.l.TaxpayersSpecialVerificationFailure,target:m.U.ContactUs}))};return(0,r.jsxs)(z.Z,{show:i,className:"u-text-center",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Z,{body:(0,r.jsx)(k.Z,{type:k.Z.Type.Title,text:n("header.title")}),right:(0,r.jsx)(V.IM,{testId:"special-verification-failure-close-button",styling:V.IM.Styling.Flat,onClick:t,iconName:B.Z,inline:!0})}),(0,r.jsx)(N.Z,{})]}),Z===v.C.Failure?(0,r.jsx)(A.Z,{}):Z===v.C.Pending?(0,r.jsx)(Q.Z,{testId:"content-loader",size:Q.Z.Size.Large}):(0,r.jsxs)(F.Z,{children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.U,{src:u("hanger-empty-state-96.svg"),size:w.U.Size.X4Large,alt:""}),(0,r.jsx)(M.Z,{size:M.Z.Size.XLarge}),(0,r.jsx)(k.Z,{alignment:k.Z.Alignment.Center,type:k.Z.Type.Heading,text:n("title")}),(0,r.jsx)(M.Z,{size:M.Z.Size.Large}),(0,r.jsx)(k.Z,{alignment:k.Z.Alignment.Center,type:k.Z.Type.Body,text:n("body_1")}),(0,r.jsx)(M.Z,{size:M.Z.Size.Large}),(0,r.jsx)(k.Z,{alignment:k.Z.Alignment.Center,type:k.Z.Type.Body,text:n("body_2",{deadline:(0,r.jsx)(k.Z,{bold:!0,children:j})})}),(0,r.jsx)(k.Z,{alignment:k.Z.Alignment.Center,type:k.Z.Type.Body})]}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.Z,{size:M.Z.Size.Large}),(0,r.jsx)(V.IM,{styling:V.IM.Styling.Filled,text:n("actions.primary"),testId:"special-verification-failure-primary-button",onClick:()=>{a((0,g.Q5)({screen:b.l.TaxpayersSpecialVerificationFailure,target:m.U.FixTaxpayersReport,targetDetails:JSON.stringify({verification_id:_})})),(0,p.ru)((0,R.Kmc)(o))}}),(0,r.jsx)(M.Z,{size:M.Z.Size.Large}),(0,r.jsx)(L.Z,{type:W.Z.Dac7Reporting,accessChannel:P.Si.ProductLink,render:e=>(0,r.jsx)("a",{"data-testid":"dac7-faq-entry-link",className:"u-disable-underline",href:e,target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(V.IM,{styling:V.IM.Styling.Outlined,text:n("actions.secondary"),testId:"special-verification-failure-secondary-button",onClick:G})})})]})]})]})},G=e=>{let{banner:i,isBannerInFeed:t,screen:n}=e,{track:a}=(0,x.Z)(),[u,T]=(0,c.useState)(!0),[I,k]=(0,c.useState)(!0),[V,N]=(0,c.useState)(null),[w,M]=(0,c.useState)(!1),[F,z]=(0,c.useState)(v.C.Idle),[B,D]=(0,c.useState)(!1),U=(0,d.v9)(Z.G),E=(0,c.useMemo)(()=>y().v4(),[]),L=(0,h.Z)();(0,c.useEffect)(()=>{i.id&&(t&&i.newsFeed.dismissed||a((0,g.rn)({target:i.isSpecialVerification?_.G.TaxpayersDac7SpecialVerificationBanner:_.G.TaxpayersDac7Banner,targetDetails:i.id,screen:n||U})))},[i.id,i.isSpecialVerification,i.newsFeed.dismissed,t,n,U,a]),(0,c.useEffect)(()=>{let e=async()=>{z(v.C.Pending);let e=await (0,f.u05)();if("errors"in e){z(v.C.Failure);return}let i=(0,C.x$)(e.education);z(v.C.Success),N(i)};i.isSpecialVerification&&e()},[i.isSpecialVerification]);let Q={[l.Warning]:o.Z.Type.Warning,[l.Error]:o.Z.Type.Error,[l.Success]:o.Z.Type.Success,[l.Info]:o.Z.Type.Info},A=e=>{if(i.isSpecialVerification&&"/settings/taxpayer_verification_education"===e){M(!0);return}if(i.isSpecialVerification&&"/settings/taxpayer_verification_correction"===e){D(!0);return}(0,p.ru)(`${e}?ref_url=${L}`)},P=e=>({text:e.title,callback:()=>{a((0,g.Q5)({screen:U,target:i.isSpecialVerification?m.U.TaxpayersDac7SpecialVerificationBanner:m.U.TaxpayersDac7Banner,targetDetails:JSON.stringify({button:"primary"===e.type?"finalise":"learn",id:i.id})})),A(e.link)}});return t&&i.newsFeed.dismissed||!u?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{title:i.title,body:i.body,closable:i.newsFeed.isDismissible&&t,styling:o.Z.Styling.Tight,type:Q[i.type],actions:(()=>{if(!i.actions)return[];let e=i.actions.find(e=>"primary"===e.type),t=i.actions.find(e=>"secondary"===e.type);return 2===i.actions.length&&e&&t?[P(e),P(t)]:1===i.actions.length&&e?[P(e)]:1===i.actions.length&&t?[P(t)]:[]})(),onClose:()=>{i.newsFeed.isDismissible&&t&&(T(!1),(0,f.MvW)(),a((0,g.Q5)({screen:U,target:i.isSpecialVerification?m.U.TaxpayersDac7SpecialVerificationBanner:m.U.TaxpayersDac7Banner,targetDetails:JSON.stringify({button:"close",id:i.id})})))},testId:"taxpayer-banner"}),t&&i.newsFeed.showModal?(0,r.jsx)(S.Z,{show:I,isSellingBlocked:i.id===s.SellingBlocked,screen:n,onClose:()=>{k(!1),(0,f.Q$S)()}}):null,i.isSpecialVerification?(0,r.jsx)(j.Z,{show:w,taxpayerEducation:V,isSpecialVerification:i.isSpecialVerification,uiState:F,onClose:()=>{M(!1)},onConfirm:()=>{a((0,g.Q5)({screen:b.l.TaxpayersSpecialVerificationEducation,target:m.U.StartSpecialVerification,targetDetails:JSON.stringify({verification_id:E})})),(0,p.ru)((0,R.Kmc)(L))}}):null,i.isSpecialVerification?(0,r.jsx)($,{show:B,onClose:()=>{D(!1)}}):null]})}},29448:function(e,i,t){t.d(i,{ZA:function(){return x},sl:function(){return p},x$:function(){return l}});var n=t(41686);let a=e=>({title:e.title,body:e.body,icon:e.icon,iconUrl:e.icon_url,darkIconUrl:e.dark_icon_url}),l=e=>({sections:e.sections.map(a)}),s=e=>({fieldTitle:e.title,fieldName:e.field_name,value:e.value,placeholder:e.placeholder}),r=e=>({fieldTitle:e.title,value:e.address?(0,n.X)(e.address):null}),c=e=>({fieldTitle:e.title,value:{code:e.value.code,title:e.value.title},placeholder:e.placeholder}),o=e=>({fieldTitle:e.title,fieldName:e.field_name,value:e.value,info:{title:e.info.title,body:e.info.body},placeholder:e.placeholder,provided:e.provided,optional:e.optional}),d=e=>({fieldTitle:e.title,value:e.value?{code:e.value.code,title:e.value.title}:null,placeholder:e.placeholder}),u=e=>({fieldTitle:e.title,fieldName:e.field_name,value:e.value,placeholder:e.placeholder,locked:e.locked}),y=e=>({fieldTitle:e.title,fieldName:e.field_name,value:e.value,locked:e.locked,address:e.address?(0,n.X)(e.address):null}),f=e=>({fieldName:e.field_name,fieldTitle:e.title,info:e.info,placeholder:e.placeholder,value:e.value,locked:e.locked}),p=e=>({firstName:e.first_name?s(e.first_name):null,lastName:e.last_name?s(e.last_name):null,birthday:e.birthdate?s(e.birthdate):null,billingAddress:e.billing_address_id?r(e.billing_address_id):null,countryOfTaxResidency:e.country_of_tax_residency?c(e.country_of_tax_residency):null,tin:e.tin?o(e.tin):null,birthplaceCountry:e.birthplace_country?d(e.birthplace_country):null,birthplaceCity:e.birthplace_city?s(e.birthplace_city):null,businessName:e.business_name?u(e.business_name):null,businessCode:e.business_code?u(e.business_code):null,secondaryBusinessCode:e.secondary_business_code?u(e.secondary_business_code):null,vatNumber:e.vat_number?u(e.vat_number):null,businessAddress:e.business_address_id?y(e.business_address_id):null,businessEstablishmentCountries:e.business_establishment_countries?f(e.business_establishment_countries):null}),x=e=>({applicable:e.applicable,country:e.country,selectedCountryCode:e.selected_country_code,businessType:e.entity_type,taxpayer:e.taxpayer?{firstName:e.taxpayer.first_name,lastName:e.taxpayer.last_name,taxIdentificationNumber:e.taxpayer.tin,country:e.taxpayer.country,businessCode:e.taxpayer.business_code,businessName:e.taxpayer.business_name}:null,showTaxRules:e.show_tax_rules,reports:e.reports?[...e.reports]:null})},67281:function(e,i,t){t.d(i,{w:function(){return l}});var n=t(17441),a=t(19280);let l=()=>(0,a.ej)(n.Dz)===n.UP.Dark},37227:function(e,i,t){var n=t(35250),a=t(70079),l=t(81518),s=t(29500),r=t(66494),c=t(49370),o=t(74311),d=t(79852),u=t(82599),y=t(20118),f=t(65529),p=t(94440),x=t(38206),g=t(90929),_=t(31697),Z=t(48417),m=t(79699),b=t(18338),S=t(57158),h=t(14475),j=t(14217),v=t(67281);i.Z=e=>{let{show:i,uiState:t,taxpayerEducation:C,isSpecialVerification:T,onClose:I,onConfirm:k}=e,V=(0,h.Z)(T?"taxpayer_special_verification.education_modal":"taxpayer_education"),{track:N}=(0,S.Z)(),w=(0,v.w)();(0,a.useEffect)(()=>{T&&i&&N((0,j.qv)({screen:m.l.TaxpayersSpecialVerificationEducation}))},[T,i,N]);let M=e=>{T&&e.target instanceof HTMLAnchorElement&&N((0,j.Q5)({screen:m.l.TaxpayersSpecialVerificationEducation,target:b.U.InfoAboutDac7}))},F=e=>e.replace(/\n/g,"<br>"),z=e=>{let i=w?e.darkIconUrl:e.iconUrl;return(0,n.jsx)(s.Z,{title:e.title,body:(0,n.jsx)(r.Z,{html:!0,text:F(e.body)}),onClick:M,prefix:(0,n.jsx)(c.U,{src:i,size:c.U.Size.Medium,alt:"",testId:"taxpayer-education-section-icon"}),styling:s.Z.Styling.Default},e.title)};return(0,n.jsx)(f.Z,{show:i,hasScrollableContent:!0,className:"u-flexbox u-flex-direction-column",children:t===Z.C.Pending?(0,n.jsx)(p.Z,{testId:"taxpayer-education-loader"}):t===Z.C.Failure?(0,n.jsx)(x.Z,{}):(0,n.jsxs)(_.Z,{separator:(0,n.jsx)(y.Z,{}),children:[(0,n.jsx)("div",{className:"u-overflow-y-unset",children:(0,n.jsx)(d.Z,{body:(0,n.jsx)(r.Z,{type:r.Z.Type.Title,text:V("header.title"),bold:!0}),right:(0,n.jsx)(u.IM,{styling:u.IM.Styling.Flat,onClick:I,iconName:l.Z,inline:!0})})}),(0,n.jsxs)(g.Z,{className:"u-flex-direction-row",children:[(0,n.jsx)(s.Z,{styling:s.Z.Styling.Wide,children:(0,n.jsx)(r.Z,{html:!0,text:V("body.information")})}),C?C.sections.map(z):null,T?(0,n.jsx)(o.Z,{text:V("disclaimer")}):null]}),T?(0,n.jsx)("div",{className:"u-flex-direction-row u-overflow-y-unset",children:(0,n.jsx)(s.Z,{children:(0,n.jsx)(u.IM,{type:u.IM.Type.Button,text:V("actions.start"),styling:u.IM.Styling.Filled,testId:"taxpayer-education-start-button",onClick:k})})}):(0,n.jsx)("div",{className:"u-flex-direction-row u-overflow-y-unset",children:(0,n.jsx)(s.Z,{children:(0,n.jsx)(u.IM,{type:u.IM.Type.Button,text:V("actions.start"),styling:u.IM.Styling.Filled,testId:"taxpayer-education-start-button",onClick:I})})})]})})}}}]);
//# sourceMappingURL=7642-8701f04c6222d7c9.js.map