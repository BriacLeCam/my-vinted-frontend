"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4900],{6375:function(e,t,r){var n=r(35250),i=r(81364),a=r.n(i),d=r(14475);t.Z=e=>{var t;let{title:r,titleSuffix:i=" | Vinted",children:o,jsonLd:s,isIndexed:l=!1,meta:c}=e,u=(0,d.Z)("main"),m=`${r}${i}`,p=(null==c?void 0:c.robots)?c.robots:"noindex";return(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:m}),(0,n.jsx)("meta",{name:"description",content:null!==(t=null==c?void 0:c.description)&&void 0!==t?t:u("page_description")}),!l&&(0,n.jsx)("meta",{name:"robots",content:p}),(null==c?void 0:c.robots)&&(0,n.jsx)("meta",{name:"robots",content:p}),(()=>{let e=null==c?void 0:c.og;return e?(0,n.jsxs)(n.Fragment,{children:[e.url&&(0,n.jsx)("meta",{property:"og:url",content:e.url}),e.type&&(0,n.jsx)("meta",{property:"og:type",content:e.type}),e.title&&(0,n.jsx)("meta",{property:"og:title",content:e.title}),e.brand&&(0,n.jsx)("meta",{property:"og:brand",content:e.brand}),e.image&&(0,n.jsx)("meta",{property:"og:image",content:e.image}),e.productId&&(0,n.jsx)("meta",{property:"og:productId",content:e.productId}),e.description&&(0,n.jsx)("meta",{property:"og:description",content:e.description}),e.priceAmount&&(0,n.jsx)("meta",{property:"og:price:amount",content:e.priceAmount}),e.priceCurrency&&(0,n.jsx)("meta",{property:"og:price:currency",content:e.priceCurrency})]}):null})(),s&&(0,n.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(Object.assign(s,{"@context":"https://schema.org"}))}}),o]})}},65090:function(e,t,r){r.d(t,{Z:function(){return eG}});var n,i,a,d,o,s,l=r(35250),c=r(79852),u=r(82599),m=r(29500),p=r(65529),f=r(81518),h=r(14475),x=r(90929),g=r(70079),v=r(48764),y=r(3283),Z=r(93766),j=r(66494),C=r(62278),b=r(63201),S=r(18939),_=r.n(S),N=r(91530),w=r.n(N),k=r(9125),I=r(83707),M=r(58477),E=r(55366),F=r(57158),z=r(94440),D=r(31697),L=r(44975),U=r(22740),A=r(26975);let B=e=>{let{type:t,name:r,card_number_patterns:n,card_number_format:i,card_number_min_length:a,card_number_max_length:d,card_number_luhn:o,cvv_required:s,cvv_min_length:l,cvv_max_length:c,icon_url:u}=e;return{type:t,name:r,cardNumberPatterns:n,cardNumberFormat:i,cardNumberMinLength:a,cardNumberMaxLength:d,cardNumberLuhn:o,cvvRequired:s,cvvMinLength:l,cvvMaxLength:c,iconUrl:u}},O=e=>e.map(B),P=e=>{let{provider:t,site:r,required_fields:n,configuration:i}=e;return{provider:t,site:r,requiredFields:n,configuration:O(i)}},$=e=>{let{brand:t,title:r,icon_url:n}=e;return{brand:t,title:r,iconUrl:n}},T=e=>null==e?void 0:e.map($),V=e=>({preselectedBrand:(null==e?void 0:e.preselected_brand)||null,cardBrands:T(null==e?void 0:e.card_brands)||null});var R=r(8951),Y=r(42875),q=r(63081),K=r(16011),G=r(36691),J=r(14217),W=r(48417),Q=r(79699),H=r(18338),X=r(36071),ee=r(62393),et=r(4080),er=r(23431),en=r(22198);(n=d||(d={})).Name="name",n.CardNumber="cardNumber",n.ExpirationDate="expirationDate",n.CVC="cvc",n.PostalCode="postalCode",n.IsSingleUse="isSingleUse";var ei=e=>{let{onBlur:t,shouldFocus:r}=e,n=(0,h.Z)("credit_card_add.name"),{register:i,setFocus:a,formState:{errors:o}}=(0,v.Gc)(),s=(0,er.Z)(o,"credit_card_add");return(0,g.useEffect)(()=>{r&&a(d.Name)},[a,r]),(0,l.jsx)(ee.M,{...i(d.Name,{required:!0,validate:function(e){if(!en.O.test(e))return n("errors.format")}}),title:n("title"),placeholder:n("placeholder"),uncontrolled:!0,styling:ee.M.Styling.Tight,validation:(0,et.Z)(s(d.Name)),onBlur:t})},ea=r(71529);function ed(e){let[t,r]=e.match(/\d{1,4}/g)||[],n=String(new Date().getFullYear()).slice(0,2),i=(null==r?void 0:r.length)===2?`${n}${r}`:r,a=Number(t)-1,d=new Date(Number(i),a,1);if(d.getFullYear()===Number(i)&&d.getMonth()===a)return new Date(d.getFullYear(),d.getMonth()+1,0,23,59,59)}var eo=r(3982),es=r(49370),el=r(74629),ec=r(43474),eu=r(93268),em=e=>{let{isCobranded:t,matchedCardConfig:r,cardBrands:n,userSelectedCardBrand:i,onSelectedCardBrand:a,transactionId:d,orderId:o}=e,{track:s}=(0,F.Z)(),c=(0,h.Z)("credit_card_add"),[u,p]=(0,g.useState)(),[f,x]=(0,g.useState)(!1),{floaterRef:v,triggerRef:y,floaterStyle:S}=(0,eo.u)({isFloaterVisible:f,shouldAutoUpdate:!0,strategy:"fixed",placement:"bottom-end"});(0,g.useEffect)(()=>{var e;p(t?(null==n?void 0:null===(e=n.find(e=>{let{brand:t}=e;return t===i}))||void 0===e?void 0:e.iconUrl)||(null==r?void 0:r.iconUrl):void 0)},[n,t,i,r]);let _=()=>{s((0,J.Q5)({screen:Q.l.CreditCardAdd,target:H.U.CobrandedModalInfo,targetDetails:JSON.stringify({transaction_id:d,service_order_id:o})}))},N=()=>x(!1),w=()=>{s((0,J.Q5)({screen:Q.l.CreditCardAdd,target:H.U.CobrandedDropdown,targetDetails:JSON.stringify({transaction_id:d,service_order_id:o})}))},k=e=>{s((0,J.Q5)({screen:Q.l.CreditCardAdd,target:H.U.CobrandedModalSelection,targetDetails:JSON.stringify({transaction_id:d,service_order_id:o,selected_card_brand:e})}))},I=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?(0,l.jsx)(es.U,{src:e,size:t?es.U.Size.Large:es.U.Size.Medium}):null};return(0,l.jsx)("div",{className:"u-padding-top-large",children:t?(0,l.jsx)(ec.Z,{onOutsideClick:N,children:(0,l.jsxs)("div",{className:"u-position-relative",children:[(0,l.jsxs)("button",{type:"button",onClick:()=>{w(),x(e=>!e)},ref:y,className:"u-flexbox u-align-items-center",children:[I(u),(0,l.jsx)(Z.Z,{orientation:Z.Z.Orientation.Vertical,size:Z.Z.Size.XSmall}),(0,l.jsx)(C.Z,{name:el.Z,color:C.Z.Color.GreyscaleLevel3})]}),f&&(0,l.jsx)("div",{className:"u-zindex-large",style:{...S,maxWidth:317},ref:v,children:(0,l.jsxs)(b.Z,{styling:b.Z.Styling.Elevated,children:[(0,l.jsx)(m.Z,{body:(0,l.jsx)(j.Z,{type:j.Z.Type.Subtitle,width:j.Z.Width.Parent,text:(0,l.jsx)("span",{onClick:e=>{e.target instanceof HTMLAnchorElement&&_()},children:c("cobranded_card.note")}),html:!0})}),(0,l.jsx)("div",{onClick:N,children:(0,l.jsx)(eu.Z,{name:"cobranded_cards",items:null==n?void 0:n.map(e=>{let{title:t,brand:r,iconUrl:n}=e;return{title:t,id:r,value:r,data:{iconUrl:n}}}),selected:i?[i]:[],onItemClick:e=>{p(e.data.iconUrl),a(e.value),k(e.value)},isMultiSelect:!1,renderItem:e=>{let{item:t,itemElementProps:r}=e;if(!t.data)return null;let{iconUrl:n}=t.data,i=I(n,!0);return(0,l.jsx)(m.Z,{...r,prefix:i})}})})]})})]})}):I(null==r?void 0:r.iconUrl)})},ep=e=>{let{shouldFocus:t,cardConfigs:r,onConfigMatched:n,onBlur:i,isCobranded:a,cardBrands:o,userSelectedCardBrand:s,transactionId:c,orderId:u,onSelectedCardBrand:m,onClearCardBrands:p}=e,f=(0,h.Z)("credit_card_add"),[x,y]=(0,g.useState)(r.find(e=>{let{type:t}=e;return t===X.Oo.Unknown})),{register:j,setValue:C,setFocus:b,watch:S,formState:{errors:_}}=(0,v.Gc)(),N=(0,er.Z)(_,"credit_card_add");return S(d.CardNumber,""),(0,g.useEffect)(()=>{t&&b(d.CardNumber)},[b,t]),(0,l.jsxs)("div",{className:"u-flexbox u-align-items-flex-start",children:[(0,l.jsx)("div",{className:"u-fill-width",children:(0,l.jsx)(ee.M,{...j(d.CardNumber,{required:!0,validate:function(e){let t=(0,ea.i)(e);if(!x)return;let{cardNumberFormat:r,cardNumberLuhn:n,cardNumberMaxLength:i,cardNumberMinLength:a}=x;return!new RegExp(r).test(t)||i&&t.length>i||a&&t.length<a?f("card_number.errors.format"):n&&!function(e){let t=(0,ea.i)(e),r=Number(t.slice(-1)),n=t.length,i=n%2;for(let e=0;e<n-1;e+=1){let n=Number(t.charAt(e));e%2===i&&(n*=2),n>9&&(n-=9),r+=n}return r%10==0}(t)?f("card_number.errors.luhn"):void 0}}),title:f("card_number.title"),placeholder:f("card_number.placeholder"),uncontrolled:!0,styling:ee.M.Styling.Tight,onChange:function(e){var t,i;let a;let{value:o}=e.target,s=(0,ea.i)(o),l=function(e,t){let r=(0,ea.i)(e);return t.find(e=>{let{cardNumberPatterns:t}=e;return t.find(e=>new RegExp(e).test(r))})}(s,r);y(l),n(l),C(d.CardNumber,(a=(0,ea.i)(s),l&&(a=a.substring(0,l.cardNumberMaxLength)),null!==(i=null===(t=a.match(/\d{1,4}/g))||void 0===t?void 0:t.join(" "))&&void 0!==i?i:"")),p()},onBlur:i,validation:(0,et.Z)(N(d.CardNumber))})}),(0,l.jsx)(Z.Z,{orientation:Z.Z.Orientation.Vertical,size:Z.Z.Size.Large}),(0,l.jsx)(em,{matchedCardConfig:x,isCobranded:a,cardBrands:o,userSelectedCardBrand:s,onSelectedCardBrand:m,transactionId:c,orderId:u})]})},ef=e=>{let{onBlur:t}=e,r=(0,h.Z)("credit_card_add.expiration_date"),{register:n,setValue:i,watch:a,formState:{errors:o}}=(0,v.Gc)(),s=(0,er.Z)(o,"credit_card_add"),c=a(d.ExpirationDate,"");return(0,l.jsx)(ee.M,{...n(d.ExpirationDate,{required:!0,validate:function(e){let t=ed(e);return t?t<new Date?r("errors.expired"):void 0:r("errors.invalid")}}),title:r("title"),placeholder:r("placeholder"),maxLength:7,uncontrolled:!0,styling:ee.M.Styling.Tight,onChange:function(e){let{value:t}=e.target,r=(0,ea.i)(t);if(r.length>=4){var n;let e=r.match(/^(\d{2})(\d{2,4})$/);null==e||e.shift(),t=null!==(n=null==e?void 0:e.join("/"))&&void 0!==n?n:t}else t=t.replace(/[^0-9/]/g,"");i(d.ExpirationDate,t)},onBlur:t,onKeyDown:function(e){let{key:t}=e;if(!/^\d+$/.test(t))return;let r=c+t;if(/^\d$/.test(r)&&"0"!==r&&"1"!==r)e.preventDefault(),i(d.ExpirationDate,`0${r}/`);else if(/^\d\d$/.test(r)){e.preventDefault();let t=parseInt(r[0],10),n=parseInt(r[1].substring(0,2),10);n>2&&0!==t?i(d.ExpirationDate,`${t}/${n}`):i(d.ExpirationDate,`${r}/`)}},validation:(0,et.Z)(s(d.ExpirationDate))})},eh=r(60108),ex=e=>{let{config:t,onBlur:r,onInfoIconClick:n}=e,i=(0,h.Z)("credit_card_add.cvc"),{register:a,setValue:o,formState:{errors:s}}=(0,v.Gc)(),c=(0,er.Z)(s,"credit_card_add"),[u,m]=(0,g.useState)(!1);return(null==t?void 0:t.cvvMaxLength)===0?null:(0,l.jsx)(ee.M,{...a(d.CVC,{required:null==t?void 0:t.cvvRequired,minLength:null==t?void 0:t.cvvMinLength,maxLength:null==t?void 0:t.cvvMaxLength}),title:i("title"),placeholder:i("placeholder"),onChange:function(e){let{value:t}=e.target;o(d.CVC,(0,ea.i)(t))},onBlur:r,uncontrolled:!0,inputMode:ee.M.InputMode.Numeric,maxLength:null==t?void 0:t.cvvMaxLength,styling:ee.M.Styling.Tight,validation:(0,et.Z)(c(d.CVC))||function(){if(!u)return null;let e=(null==t?void 0:t.cvvRequired)?"info_text":"info_text_optional";return(0,et.Z)(i(e),"muted")}(),suffix:(0,l.jsx)("div",{className:"u-flexbox u-align-items-center u-cursor-pointer",onClick:u?function(){m(!1)}:function(){m(!0),n()},"data-testid":"cvc-info-circle",children:(0,l.jsx)(C.Z,{name:eh.Z,color:C.Z.Color.GreyscaleLevel4})})})},eg=e=>{let{onBlur:t}=e,r=(0,h.Z)("credit_card_add.postal_code"),{register:n,formState:{errors:i}}=(0,v.Gc)(),a=(0,er.Z)(i,"credit_card_add");return(0,l.jsx)(ee.M,{...n(d.PostalCode,{required:!0,validate:function(e){if(5!==(0,ea.i)(e).length)return r("errors.invalid")}}),title:r("title"),placeholder:r("placeholder"),uncontrolled:!0,styling:ee.M.Styling.Tight,validation:(0,et.Z)(a(d.Name)),onBlur:t})},ev=r(58367),ey=()=>{let{setValue:e,control:t}=(0,v.Gc)(),r=(0,h.Z)("credit_card_add.single_use");function n(t){let{target:r}=t;e(d.IsSingleUse,!r.checked)}return(0,l.jsx)(v.Qr,{defaultValue:!0,render:e=>{let{field:{name:t,value:i}}=e;return(0,l.jsx)(ev.F,{name:t,text:r("consent"),checked:!i,testId:"credit-card-form-single-use-checkbox",onChange:n})},name:d.IsSingleUse,control:t})},eZ=r(34404);let ej=e=>{let{getFormValues:t,creditCardType:r,trackingTargetDetails:n}=e,{track:i}=(0,F.Z)();return{trackSubmit:(0,g.useCallback)(e=>{var a;let{cardRegistrationId:d,hasFrontEndValidationPassed:o}=e,s=o?null:(a=t().cardNumber,(0,ea.i)(a).slice(0,6)||null),l={valid:o,card_registration_id:null!=d?d:null,card_details_stored:!t().isSingleUse,card_brand:r||X.Oo.Unknown,...s&&{card_brand_identificator:s}},c=eZ.M5[n.type]||n.type;i((0,J.Q5)({target:H.U.UseThisCard,screen:Q.l.CreditCardAdd,targetDetails:JSON.stringify({...n,type:c,...l})}))},[i,t,r,n]),trackTokenizationOutcome:(0,g.useCallback)(e=>{let{isSuccess:t,errorMessage:r,providerName:a}=e;i((0,J.kO)({providerName:a,errorMessage:r,checkoutType:n.type,outcome:t?"success":"failure",..."transaction_id"in n&&{transactionId:n.transaction_id},..."service_order_id"in n&&{orderId:n.service_order_id}}))},[i,n])}};var eC=r(77176),eb=r(98173),eS=r.n(eb),e_=r(68039),eN=r.n(e_),ew=r(58706);(i=o||(o={})).Ok="ok",i.ProviderError="providerError",i.LibraryNotLoaded="libraryNoLoaded";let ek={test:"https://test.adyen.com/hpp/cse/js/8215282108561142.shtml",live:"https://live.adyen.com/hpp/cse/js/2615399527220859.shtml"};var eI={load:function(e){(0,ew.v)({id:"adyen-tokenizer",src:ek[e.site||"live"]})},tokenize:async function(e,t){if(!window.adyen)return Promise.resolve({status:o.LibraryNotLoaded});let r=window.adyen.createEncryption(t.accessKey),n=t.preregistrationData,i=e.expirationMonth.toString(),a=e.expirationYear.toString(),d={number:e.cardNumber,cvc:e.cvc,holderName:e.name,expiryMonth:i,expiryYear:a,generationtime:n},s=r.encrypt(d),l={cardNumber:r.encrypt({number:e.cardNumber,generationtime:n}),expirationMonth:r.encrypt({expiryMonth:i,generationtime:n}),expirationYear:r.encrypt({expiryYear:a,generationtime:n}),cvc:r.encrypt({cvc:e.cvc,generationtime:n})},c=!eS()(l,eN());return Promise.resolve({status:s?o.Ok:o.ProviderError,encryptedCard:s,encryptedCardDetails:c?l:void 0})}},eM=r(26841),eE={load:function(){},tokenize:async function(e,t){var r;if(!t.cardRegistrationUrl)return Promise.resolve({status:o.LibraryNotLoaded});let n=`0${e.expirationMonth}`.slice(-2),i=`${e.expirationYear}`.slice(-2),a=new URLSearchParams;a.append("data",t.preregistrationData),a.append("accessKeyRef",t.accessKey),a.append("cardNumber",e.cardNumber),a.append("cardExpirationDate",`${n}${i}`),a.append("cardCvx",e.cvc.toString());let d=await eM.Z.post(t.cardRegistrationUrl,a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return(null===(r=d.data)||void 0===r?void 0:r.indexOf("data="))===0?Promise.resolve({status:o.Ok,encryptedCard:d.data}):Promise.resolve({status:o.ProviderError,error:JSON.stringify(d)})}},eF=r(35711),ez={load:function(){},tokenize:async function(e,t){if(!t.cardRegistrationUrl)return Promise.resolve({status:o.LibraryNotLoaded});let r=new eF.Z,n=await r.post(t.cardRegistrationUrl,{type:"card",name:e.name,number:e.cardNumber,cvv:e.cvc.toString(),expiry_year:e.expirationYear,expiry_month:e.expirationMonth},{headers:{"content-type":"application/json",Authorization:`Bearer ${t.accessKey}`}});return"errors"in n?Promise.resolve({status:o.ProviderError,error:JSON.stringify(n.errors)}):Promise.resolve({status:o.Ok,encryptedCard:n.token})}},eD={load:function(){},tokenize:async function(e,t){try{if(!t.initializationData)return{status:o.LibraryNotLoaded};let{PayrailsCSE:n}=await r.e(440).then(r.t.bind(r,40440,19)),i=n.init(t.initializationData),a={holderName:e.name,cardNumber:e.cardNumber,expiryMonth:e.expirationMonth.toString(),expiryYear:e.expirationYear.toString(),securityCode:e.cvc},d=await i.tokenize(a,{storeInstrument:!0}),s=await d.json();if("errors"in s||!(null==s?void 0:s.id))return{status:o.ProviderError};return{status:o.Ok,encryptedCard:s.id}}catch{return{status:o.ProviderError}}}},eL=function(e){switch(e){case eC.ln.Adyen:case eC.ln.AdyenBank:return eI;case eC.ln.Mangopay:return eE;case eC.ln.CheckoutCom:return ez;case eC.ln.Payrails:return eD;default:throw Error(`Unsupported payment provider for tokenization ${e}`)}};let eU=e=>{let{id:t,preregistration_data:r,access_key:n,card_registration_url:i,credit_card:a,external_code:d,provider:o,initialization_data:s}=e;return{id:t,preregistrationData:r,accessKey:n,cardRegistrationUrl:i,creditCard:a?(0,U.x)(a):null,externalCode:d,provider:o,initializationData:s}};async function eA(e,t){let r=await L.Mq$({name:t.name,cardBrand:t.brand});if("errors"in r)return{error:r.message};let n=eU(r.info),{encryptedCard:i,encryptedCardDetails:a,error:d}=await eL(e).tokenize(t,n);return i?{id:n.id,encryptedCard:i,encryptedCardDetails:a}:{error:d,id:n.id}}let eB="is_cc_save_confirmation_modal_seen";var eO=r(3997),eP=r.n(eO),e$=r(94838),eT=r(30226),eV=e=>{let{registrationId:t,initialAuthAction:r,onSuccess:n,onFailure:i}=e,a=(0,h.Z)("credit_card_add.threeds2"),[d,o]=(0,g.useState)(!1),[s,c]=(0,g.useState)(null),[u,m]=(0,g.useState)(null),p=(0,g.useCallback)(e=>{i(e||a("errors.resources_failed_loading"))},[a,i]);async function f(e){if(!t){p();return}let r=await (0,L.ykQ)({registrationId:t,paymentData:{details:e.data.details,data:e.data.paymentData}});if("errors"in r){var i;p((null===(i=r.errors[0])||void 0===i?void 0:i.value)||r.message);return}let{authentication_action:a,authentication_redirect_url:d,credit_card:o}=r;if(a){c((0,A.$)(a));return}if(d){(0,q.ru)(d);return}o&&n((0,U.x)(o)),p()}(0,g.useEffect)(()=>{(async function(){let e=await (0,L.Ukv)();if("errors"in e){var t;p((null===(t=e.errors[0])||void 0===t?void 0:t.value)||e.message);return}m((0,eT.b)(e.checkout_configuration).threeDS2)})()},[p]),(0,g.useEffect)(()=>{r&&c(r)},[r]);let x=eP()({"threeds2__card-form-challenge":d});return(0,l.jsx)("div",{className:x,children:(0,l.jsx)(e$.Z,{authAction:s,threeDS2Config:u,onError:p,onContinue:function(e){c(null),o(!1),f(e)},onInputRequested:function(){o(!0)}})})},eR=r(66835),eY=e=>{let{show:t,onCancel:r,onConfirm:n,transactionId:i}=e,{track:a}=(0,F.Z)(),d=(0,h.Z)("credit_card_save_confirmation_modal"),o=(0,eR.Z)("/assets/credit-card-form");function s(e){if(!i)return;let t=e?H.U.SaveTheCard:H.U.DontSaveTheCard;a((0,J.Q5)({target:t,screen:Q.l.SaveCreditCardReminder,targetDetails:JSON.stringify({transaction_id:i})}))}return(0,l.jsx)(p.Z,{show:t,testId:"credit-card-save-confirmation-modal",children:(0,l.jsxs)(m.Z,{children:[(0,l.jsxs)("div",{className:"u-text-center",children:[(0,l.jsx)(es.U,{src:o("credit-card.svg"),size:es.U.Size.XLarge,alt:""}),(0,l.jsx)(Z.Z,{size:Z.Z.Size.Large}),(0,l.jsx)(j.Z,{text:d("title"),type:j.Z.Type.Heading,testId:"credit-card-save-confirmation-modal--title"})]}),(0,l.jsx)(Z.Z,{size:Z.Z.Size.Large}),(0,l.jsx)(j.Z,{text:d("description"),testId:"credit-card-save-confirmation-modal--description"}),(0,l.jsx)(Z.Z,{size:Z.Z.Size.XLarge}),(0,l.jsx)(u.IM,{text:d("actions.confirm"),styling:u.IM.Styling.Filled,onClick:function(){s(!0),n()},testId:"credit-card-save-confirmation-modal--confirm-button"}),(0,l.jsx)(Z.Z,{}),(0,l.jsx)(u.IM,{styling:u.IM.Styling.Flat,text:d("actions.cancel"),onClick:function(){s(!1),r()},testId:"credit-card-save-confirmation-modal--cancel-button"})]})})};let eq={[d.Name]:"full_name",[d.CardNumber]:"card_number",[d.ExpirationDate]:"expiration_date",[d.CVC]:"security_code",[d.PostalCode]:"postal_Code"};(a=s||(s={}))[a.WasShownOnLastSubmit=0]="WasShownOnLastSubmit",a[a.WasShownBeforeLastSubmit=1]="WasShownBeforeLastSubmit",a[a.NotShown=2]="NotShown",a[a.Shown=3]="Shown";var eK=e=>{let{source:t,isVisible:r,errorMessage:n,onCancel:i,onSuccess:a,submitActionText:o,trackingTargetDetails:s,allowSingleUse:c=!1,onLoaded:p=w(),onTrackableFieldChange:f=w()}=e,S=(0,h.Z)("credit_card_add"),{track:N}=(0,F.Z)(),B=(0,y.v9)(R.ex),O=(0,v.cI)({mode:"onTouched",defaultValues:{[d.Name]:B||""}}),{handleSubmit:$,formState:T,getValues:ee,setValue:et,trigger:er}=O,{errors:en}=T,[eo,es]=(0,g.useState)(),[el,ec]=(0,g.useState)(),[eu,em]=(0,g.useState)(null),[eh,ev]=(0,g.useState)(null),[eZ,eC]=(0,g.useState)(null),[eb,eS]=(0,g.useState)(null),[e_,eN]=(0,g.useState)({uiState:W.C.Idle}),[ew,ek]=(0,g.useState)([]),[eI,eM]=(0,g.useState)(!1),[eE,eF]=(0,g.useState)(!1),[ez,eD]=(0,g.useState)("true"===(0,G.le)(eB)?1:2),eU=(0,y.v9)((0,Y.z)("frontend_cobranded_card_check")),{trackSubmit:eO,trackTokenizationOutcome:eP}=ej({trackingTargetDetails:s,getFormValues:ee,creditCardType:null==el?void 0:el.type});async function e$(e){await er(e),f({name:eq[e],isValid:!en[e]})}function eT(e){return()=>e$(e)}function eR(){eI&&(ek([]),eM(!1),eF(!1),em(null))}async function eK(e){if(e&&!en[d.CardNumber]&&(ee().cardNumber!==eh||ee().cardNumber===eh&&!eI)){let r=await L.ohG(e);if("brands"in r){var t;let e=V(r.brands);ek(e.cardBrands),eM((null===(t=e.cardBrands)||void 0===t?void 0:t.length)===2),em(e.preselectedBrand),eF(!0)}}ev(ee().cardNumber)}async function eG(){if(await e$(d.CardNumber),eU){let e=function(e){let t=(0,ea.i)(e);return t.length>=16?t.slice(0,8):t.length<16&&t.length>=6?t.slice(0,6):null}(ee().cardNumber);await eK(e)}}function eJ(){N((0,J.Q5)({screen:Q.l.CreditCardAdd,target:H.U.CvvFieldInfo,targetDetails:JSON.stringify(s)}))}function eW(){eO({hasFrontEndValidationPassed:!1})}async function eQ(e){if(eC(null),0===ez&&eD(1),3===ez&&eD(0),!el||!eo){eC(S("card_number.errors.format")),eO({hasFrontEndValidationPassed:!1});return}let r=function(e,t,r){let n=ed(e.expirationDate);return n?{brand:r||t.type,name:e.name,cardNumber:(0,ea.i)(e.cardNumber),cvc:(0,ea.i)(e.cvc),expirationYear:n.getFullYear(),expirationMonth:n.getMonth()+1,postalCode:e.postalCode}:null}(e,el,eu);if(!r){eC(S("errors.generic")),eO({hasFrontEndValidationPassed:!1});return}let n=await eA(eo.provider,r);if(!n.encryptedCard||!n.id){eC(n.error||S("errors.generic")),eP({isSuccess:!1,errorMessage:n.error,providerName:eo.provider}),eO({hasFrontEndValidationPassed:!0,cardRegistrationId:n.id});return}eP({isSuccess:!0,providerName:eo.provider});let i=await L.M9F({id:n.id,brand:r.brand,registrationData:n.encryptedCard,isSingleUse:ee().isSingleUse,encryptedCardDetails:n.encryptedCardDetails,browserAttributes:(0,K.ch)(),source:t,isCobranded:eI});if("errors"in i){eC(_()(i.errors.map(e=>{let{value:t}=e;return t})).join("\n")||i.message||S("errors.generic")),eO({hasFrontEndValidationPassed:!0,cardRegistrationId:n.id});return}let{authentication_redirect_url:d,credit_card:o,authentication_action:s}=i;if(d){(0,q.mZ)(d);return}if(s){eN({uiState:W.C.Pending,action:(0,A.$)(s)}),eS(n.id);return}o&&(eO({hasFrontEndValidationPassed:!0,cardRegistrationId:n.id}),a((0,U.x)(o)))}async function eH(e){if(!(e.isSingleUse&&2===ez)){await eQ(e);return}t.entityType!==X.Ye.Transaction||t.entityId&&N((0,J.NN)({screen:Q.l.SaveCreditCardReminder,transactionId:t.entityId})),(0,G.D$)(eB,"true"),eD(3)}(0,g.useEffect)(()=>{n&&eC(n)},[n]),(0,g.useEffect)(()=>{eZ&&0===ez&&et(d.IsSingleUse,!0)},[et,eZ,ez]),(0,g.useEffect)(()=>{N((0,J.qv)({screen:Q.l.CreditCardAdd}))},[N]),(0,g.useEffect)(()=>{!r&&eE&&N((0,J.e2)({screen:Q.l.CreditCardAdd,action:J.ZH.CoBrandedCard,..."service_order_id"in s&&{orderId:s.service_order_id},..."transaction_id"in s&&{transactionId:s.transaction_id},actionDetails:{co_branded_card:eI}}))},[r,eI,ew,s,eE,N]),(0,g.useEffect)(()=>{eo&&p()},[p,eo]),(0,g.useEffect)(()=>{(async function(){let e=await L.yLj();if("errors"in e)return;let t=P(e.credit_card_registration);es(t),eL(t.provider).load(t)})()},[]);let eX=(0,g.useCallback)(e=>{eC(e||S("errors.generic")),eN({uiState:W.C.Failure})},[S]);async function e0(){et(d.IsSingleUse,!1),await eQ(ee())}async function e1(){await eQ(ee())}return eo?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.Z,{children:(0,l.jsx)("div",{className:"u-position-relative",children:(0,l.jsx)(v.RV,{...O,children:(0,l.jsxs)("form",{onSubmit:$(eH,eW),children:[(0,l.jsxs)(m.Z,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(D.Z,{separator:(0,l.jsx)(Z.Z,{}),children:[(0,l.jsx)(j.Z,{text:S("header.title"),type:j.Z.Type.Heading}),(0,l.jsxs)("div",{className:"u-flexbox u-flex-direction-row u-align-items-center",children:[(0,l.jsx)(j.Z,{text:S("header.subtitle"),theme:"muted"}),(0,l.jsx)(Z.Z,{orientation:Z.Z.Orientation.Vertical}),(0,l.jsx)(C.Z,{name:E.Z,color:C.Z.Color.GreyscaleLevel3,testId:"cc-form-lock-icon"})]}),(0,l.jsxs)(D.Z,{separator:(0,l.jsx)(Z.Z,{orientation:Z.Z.Orientation.Vertical}),children:[(0,l.jsx)(C.Z,{name:k.Z,testId:"cc-form-master-icon"}),(0,l.jsx)(C.Z,{name:I.Z,testId:"cc-form-visa-icon"}),(0,l.jsx)(C.Z,{name:M.Z,testId:"cc-form-discover-icon"})]})]}),(0,l.jsx)(Z.Z,{})]}),eZ?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.Z,{theme:"warning",styling:m.Z.Styling.Wide,body:eZ}),(0,l.jsx)(Z.Z,{size:Z.Z.Size.XLarge})]}):null,function(){if(!eo)return null;let e=eo.requiredFields.includes(X.n3.PostalCode);return(0,l.jsxs)(D.Z,{separator:(0,l.jsx)(Z.Z,{size:Z.Z.Size.XLarge}),children:[(0,l.jsx)(b.Z,{children:(0,l.jsx)(m.Z,{children:(0,l.jsxs)(D.Z,{separator:(0,l.jsx)(Z.Z,{size:Z.Z.Size.X2Large}),children:[(0,l.jsx)(ei,{shouldFocus:!B,onBlur:eT(d.Name)}),(0,l.jsx)(ep,{shouldFocus:!!B,cardConfigs:eo.configuration,onConfigMatched:ec,onBlur:eG,isCobranded:eI,cardBrands:ew,userSelectedCardBrand:eu,transactionId:t.entityId,orderId:t.orderId,onSelectedCardBrand:em,onClearCardBrands:eR}),(0,l.jsxs)("div",{className:"u-flexbox u-flex-direction-row",children:[(0,l.jsx)("div",{className:"credit-card-form__expiry",children:(0,l.jsx)(ef,{onBlur:eT(d.ExpirationDate)})}),(0,l.jsx)(Z.Z,{size:Z.Z.Size.X2Large,orientation:Z.Z.Orientation.Vertical}),(0,l.jsx)("div",{className:"credit-card-form__cvc",children:(0,l.jsx)(ex,{config:el,onInfoIconClick:eJ,onBlur:eT(d.CVC)})})]}),e&&(0,l.jsx)(eg,{onBlur:eT(d.PostalCode)})]})})}),c&&(0,l.jsx)(ey,{})]})}()]}),(0,l.jsx)(eY,{show:3===ez,transactionId:t.entityId,onConfirm:$(e0,eW),onCancel:$(e1,eW)})]})})})}),(0,l.jsx)(v.RV,{...O,children:(0,l.jsx)("form",{onSubmit:$(eH,eW),children:(0,l.jsxs)(m.Z,{children:[function(){let e=T.isSubmitting||e_.uiState===W.C.Pending;return(0,l.jsx)(u.IM,{disabled:e,isLoading:e,type:u.IM.Type.Submit,styling:u.IM.Styling.Filled,text:o||S("actions.submit"),testId:"credit-card-form--submit-button"})}(),(0,l.jsx)(Z.Z,{size:Z.Z.Size.Small}),i?(0,l.jsx)(u.IM,{styling:u.IM.Styling.Flat,text:S("actions.cancel"),onClick:i}):null]})})}),(0,l.jsx)(eV,{registrationId:eb,initialAuthAction:e_.action,onSuccess:a,onFailure:eX})]}):(0,l.jsx)(z.Z,{styling:z.Z.Styling.Wide,testId:"credit-card-form--loader"})},eG=e=>{let{source:t,show:r,allowSingleUse:n,submitActionText:i,trackingTargetDetails:a,errorMessage:d,onCreditCardAddSuccess:o,onBack:s,onClose:g,onTrackableFieldChange:v}=e,y=(0,h.Z)("credit_card_add.modal");return(0,l.jsx)(p.Z,{show:r,hasScrollableContent:!0,testId:"credit-card-form-modal",children:(0,l.jsxs)("div",{className:"u-ui-padding-regular u-fill-width",children:[(0,l.jsx)(c.Z,{body:y("title"),right:g&&(0,l.jsx)(u.IM,{inline:!0,iconName:f.Z,styling:u.IM.Styling.Flat,onClick:g,testId:"close-credit-card-form-modal"})}),(0,l.jsx)(x.Z,{children:(0,l.jsx)(m.Z,{styling:m.Z.Styling.Tight,children:(0,l.jsx)(eK,{isVisible:r,errorMessage:d,source:t,allowSingleUse:n,submitActionText:i,onSuccess:function(e){o(e)},onCancel:s,onTrackableFieldChange:v,trackingTargetDetails:a})})})]})})}},88836:function(e,t,r){var n=r(35250),i=r(66494),a=r(93766),d=r(29500),o=r(40504),s=r(14475),l=r(9616),c=r(69894);let u=e=>e.toString().padStart(2,"0");t.Z=e=>{let{card:t,suffix:r,onClick:m,clickableType:p}=e,f=(0,s.Z)("payments.card"),h=p!==c.M.NotClickable,x=t.expired&&p===c.M.NotExpiredClickable;return(0,n.jsx)(d.Z,{disabled:x,prefix:(0,n.jsx)(o.Z,{payInMethodBrand:t.brand}),type:h?d.Z.Type.Navigating:void 0,suffix:r,title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{text:(0,l.o)(t.brand),bold:!0,theme:"amplified"}),(0,n.jsx)(a.Z,{orientation:a.Z.Orientation.Vertical,size:a.Z.Size.Small}),(0,n.jsx)(i.Z,{text:f("ends_with")}),(0,n.jsx)(a.Z,{orientation:a.Z.Orientation.Vertical,size:a.Z.Size.Small}),(0,n.jsx)(i.Z,{text:t.lastFour,bold:!0,theme:"amplified"})]}),body:(()=>{let{expired:e,expirationYear:r,expirationMonth:d}=t;return e||d||r?(0,n.jsx)(i.Z,{text:e?f("expired"):(()=>{if(!d||!r)return null;let e=`${u(d)}/${r}`;return(0,n.jsxs)(n.Fragment,{children:[f("expires"),(0,n.jsx)(a.Z,{orientation:a.Z.Orientation.Vertical,size:a.Z.Size.Small}),e]})})(),theme:e?"warning":void 0,type:i.Z.Type.Subtitle}):null})(),onClick:()=>{h&&m(t)},testId:"credit-card-list--card-cell"})}},16167:function(e,t,r){var n=r(35250),i=r(70079),a=r(91530),d=r.n(a),o=r(29500),s=r(20118),l=r(88836);t.Z=e=>{let{cards:t,renderSuffix:r,clickableItemType:a,onItemClick:c=d()}=e;return(0,n.jsx)(o.Z,{testId:"credit-card-list",styling:o.Z.Styling.Tight,children:t.map(e=>(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(l.Z,{card:e,suffix:r(e.id),onClick:c,clickableType:a}),(0,n.jsx)(s.Z,{})]},e.id))})}},69894:function(e,t,r){var n,i;r.d(t,{M:function(){return n}}),(i=n||(n={}))[i.NotClickable=0]="NotClickable",i[i.AlwaysClickable=1]="AlwaysClickable",i[i.NotExpiredClickable=2]="NotExpiredClickable"},40504:function(e,t,r){r.d(t,{Z:function(){return S}});var n=r(35250),i=r(62278),a=r(91823),d=r(3441),o=r(33637),s=r(35635),l=r(66532),c=r(78686),u=r(44893),m=r(37152),p=r(38309),f=r(68330),h=r(18479),x=r(26968),g=r(93713),v=r(29832),y=r(30739),Z=r(64069),j=r(52136),C=r(81670);let b={american_express:d.Z,diners_club:o.Z,jbc:s.Z,payconiq:l.Z,bcmc:c.Z,discover:u.Z,maestro:m.Z,paypal:p.Z,visa:f.Z,blik:h.Z,mastercard:x.Z,sofort:g.Z,ideal:v.Z,trustly:y.Z,cartes_bancaires:Z.Z,p24:j.Z,wallet:C.Z,credit_card:a.Z,unknown:a.Z};var S=e=>{let{payInMethodBrand:t}=e,r=t.toLowerCase().replace(/[\s-]+/g,"_"),d=b[r];return d?(0,n.jsx)(i.Z,{name:d,aria:{"aria-hidden":"true"},testId:`pay-in-method-icon-${r}`}):(0,n.jsx)(i.Z,{name:a.Z,aria:{"aria-hidden":"true"},testId:"pay-in-method-icon-credit-card"})}},94838:function(e,t,r){r.d(t,{Z:function(){return I}});var n,i,a,d,o,s,l=r(35250);(n=d||(d={})).Adyen="adyen",n.AdyenBank="adyen_bank";var c=r(70079),u=r(3283),m=r(91530),p=r.n(m),f=r(42491);(i=o||(o={})).ThreeDS2="threeDS2",i.Await="await",(a=s||(s={})).Fingerprint="fingerprint",a.Challenge="challenge";var h=r(48417),x=r(14475),g=r(58706);let v=e=>{let{id:t,href:r,crossOrigin:n,integrity:i}=e;return new Promise((e,a)=>{let d=document.createElement("link");d.id=t,d.href=r,d.type="text/css",d.rel="stylesheet",n&&(d.crossOrigin=n),i&&(d.integrity=i),d.onload=e,d.onerror=a,document.head.appendChild(d)})},y={version:"5.2.0",resources:{test:[{type:"js",integrity:"sha384-qt4kgNMZ0UwOQ6AwZY31nwn5Cf4UU8wPfkhFu/tiF/Jta16AjBtfrkh1dFw2G7oP"},{type:"css",integrity:"sha384-gaEp/efBcplH05NvdYnrdMcaKBrhlK/jau5tB/MkhdOsY7sz6mUnu5fa26lNzt+i"}],live:[{type:"js",integrity:"sha384-qt4kgNMZ0UwOQ6AwZY31nwn5Cf4UU8wPfkhFu/tiF/Jta16AjBtfrkh1dFw2G7oP"},{type:"css",integrity:"sha384-gaEp/efBcplH05NvdYnrdMcaKBrhlK/jau5tB/MkhdOsY7sz6mUnu5fa26lNzt+i"}]}};var Z=r(29500),j=r(62278),C=r(93766),b=r(66494),S=r(79320),_=e=>{let{adyenCheckout:t,adyenAction:r}=e,n=(0,c.useRef)(null),i=(0,c.useRef)();return(0,c.useEffect)(()=>((()=>{if(!n.current)return;let e=t.createFromAction(r).mount(n.current);i.current=e})(),()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.remove()}),[r,t,n]),(0,l.jsx)("div",{className:"adyen-await",ref:n})},N=e=>{let{adyenAction:t,adyenCheckout:r}=e,n=(0,x.Z)("blik_direct_payment_method.pending_payment_modal");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{hidden:!0,children:(0,l.jsx)(_,{adyenAction:t,adyenCheckout:r})}),(0,l.jsxs)(Z.Z,{children:[(0,l.jsxs)("div",{className:"u-text-center",children:[(0,l.jsx)(j.Z,{name:S.Z}),(0,l.jsx)(C.Z,{size:C.Z.Size.XSmall}),(0,l.jsx)(b.Z,{type:b.Z.Type.Heading,alignment:b.Z.Alignment.Center,text:n("title")}),(0,l.jsx)(C.Z,{size:C.Z.Size.Large})]}),(0,l.jsx)(b.Z,{html:!0,type:b.Z.Type.Body,text:n("description")})]})]})};function w(e){return(null==e?void 0:e.type)===o.ThreeDS2||(null==e?void 0:e.type)===o.Await}var k=e=>{let{onError:t,onContinue:r,authAction:n,threeDS2Config:i,onInputRequested:a=p()}=e,[d,s]=(0,c.useState)(),[m,Z]=(0,c.useState)(h.C.Idle),j=(null==n?void 0:n.adyen)||(null==n?void 0:n.adyenBank),C=(0,x.Z)("threeds2"),b=(0,u.v9)(f.K);function S(e){r(e)}function k(e){t(e.message)}async function I(){if(!i||!window.AdyenCheckout){t(C("errors.resources_failed_loading"));return}let{providerConfig:e}=i,r={locale:b,environment:e.site,clientKey:e.apiKey,paymentMethodsConfiguration:{threeDS2:{challengeWindowSize:"05"}},onAdditionalDetails:S,onError:k};s(await window.AdyenCheckout(r))}if((0,c.useEffect)(()=>{m!==h.C.Failure&&m!==h.C.Success||I()},[j,m]),(0,c.useEffect)(()=>{i&&j&&m===h.C.Idle&&e(i.providerConfig.site);async function e(e){Z(h.C.Pending);try{var t;await (t=e,Promise.all(y.resources[t].map(e=>{var r,n;return function(e,t){let{type:r,integrity:n}=t,i="anonymous",a=`adyen-${r}`;switch(r){case"js":return(0,g.v)({id:a,src:e,crossOrigin:i,integrity:n});case"css":return v({id:a,href:e,crossOrigin:i,integrity:n});default:throw Error(`Unknown type to load ${r}`)}}((r=y.version,n=e.type,`https://checkoutshopper-${t}.adyen.com/checkoutshopper/sdk/${r}/adyen.${n}`),e)}))),Z(h.C.Success)}catch{Z(h.C.Failure)}}},[m,i,j]),(0,c.useEffect)(()=>{w(j)&&a()},[j,a]),!d||!j)return null;if("blik"===j.paymentMethodType&&j.type===o.Await)return(0,l.jsx)(N,{adyenAction:j,adyenCheckout:d});if(w(j))return(0,l.jsx)(_,{adyenAction:j,adyenCheckout:d});throw Error(`Unknown Adyen action ${j.type}`)},I=e=>{let{onError:t,onContinue:r,authAction:n,threeDS2Config:i,onInputRequested:a}=e;if(!i)return null;switch(i.provider){case d.Adyen:case d.AdyenBank:return(0,l.jsx)(k,{authAction:n,threeDS2Config:i,onError:t,onContinue:r,onInputRequested:a});default:return null}}},93268:function(e,t,r){var n=r(35250),i=r(70079),a=r(90923),d=r(58367),o=r(29500),s=r(66494),l=r(7419),c=r.n(l),u=r(81405);class m extends i.Component{renderButton(e){let{name:t,selected:r,isMultiSelect:i,disableButtonClicks:o,itemButtonTestId:s}=this.props,{value:l}=e,c={name:i?`${t}[]`:t,value:l,checked:r.includes(l),aria:{"aria-labelledby":`${t}-list-item-${e.id}`},testId:s&&`${s}-${e.id}`},u=(0,n.jsx)(a.J,{...c,propagateEvent:o});return(i&&(u=(0,n.jsx)(d.F,{...c})),o)?(0,n.jsx)("div",{className:"u-no-pointer-events",children:u}):u}renderItem(e){let{name:t,selected:r,renderItem:i}=this.props,a=this.onItemClick.call(this,e),d=this.renderButton.call(this,e),l={id:`${t}-list-item-${e.id}`,key:e.id,type:o.Z.Type.Navigating,body:(0,n.jsx)(s.Z,{text:e.title,type:s.Z.Type.Title}),onClick:a,suffix:d};return c()(i)?i({itemElementProps:l,isSelected:r.includes(e.value),item:e,button:d}):(0,n.jsx)(o.Z,{...l})}render(){let{items:e}=this.props;return(0,n.jsx)(u.Z,{children:e.map(this.renderItem.bind(this))})}constructor(...e){super(...e),this.onItemClick=e=>t=>{let{disableButtonClicks:r,onItemClick:n}=this.props;t.target instanceof HTMLAnchorElement||r||t.preventDefault(),c()(n)&&n(e,t)}}}m.defaultProps={items:[],selected:[],isMultiSelect:!1,disableButtonClicks:!1},t.Z=m},22198:function(e,t,r){r.d(t,{O:function(){return n}});let n=/^\s*[a-zA-Z\u00C0-\u1FFF\u2C00-\uD7FF.\-,']+(\s+[a-zA-Z\u00C0-\u1FFF\u2C00-\uD7FF.\-,']+)+\s*$/},9616:function(e,t,r){r.d(t,{o:function(){return i}});var n=r(36071);let i=e=>{let t=e.toLowerCase().replace(/\s+|_/g,""),r=Object.keys(n.WF).find(e=>e.toLowerCase()===t);return r?n.WF[r]:e}}}]);
//# sourceMappingURL=4900-b46596df8ee6539c.js.map